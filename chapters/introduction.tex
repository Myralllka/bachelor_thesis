\chapter{Introduction}
\label{chapter:intro}

Micro unmanned aerial vehicles (MAVs) recently saw a rise in usage across various fields. Drones are already wide used in cinematography\footnote{\href{https://coptrz.com/drones-in-filmmaking-the-best-drones-for-the-job/\#:~:text=How\%20drones\%20are\%20used\%20in\%20big\%2Dbudget\%20films}{Coptrz, "How drones are used in big-budget films}} and advertising\footnote{\href{https://www.bangkokpost.com/business/2124327/the-future-of-advertising-could-be-drones\#:~:text=However\%2C\%20using\%20drones\%20is\%20a,automobile\%20shows\%20and\%20other\%20campaigns.}{Bangkokpost, "The future of advertising could be drones"}}, In Ukraine they are very helpful in farming (to apply pesticides to fields)\footnote{\href{https://techukraine.org/portfolio/droneua-solution-of-field-cultivation-by-drones-up-to-1-million-hectares-in-ukraine/\#:~:text=Since\%202019\%2C\%20spraying\%20drones\%20began,not\%20depend\%20on\%20soil\%20moisture.}{DroneUA}}. City emergency departments use UAVs  - firefighters can use them to see and evaluate the situation from the sky, localise the source of fire and deal with that\footnote{\href{https://www.dslrpros.com/firefighting-drones.html}{Fire Fighting Drones}}, sometimes it even can have some fire-extinguishing capsules as projectiles\footnote{\href{https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=9328798}{Autonomous Firefighting Inside Buildings by an Unmanned Aerial Vehicle}}. They are also quite popular in military industry.

There is no precise definition of MAV; modern MAVs can even be as small as 5 centimetres, but more generally - it is an Unmanned aerial vehicles (UAVs) with some size and weight limitations.

The inspiration for this project was taken from DJI obstacle avoidance technology introduced with the release of the DJI Mavic 3 drone\footnote{\href{https://www.dji.com/cz/mavic-3}{DJI Mavic 3}} on fifth November 2021. Despite the fact that the idea is old, neither DJI nor MRS nor other research groups have a well-developed visual obstacle avoidance system, the best for now can be Skydio obstacle avoidance system \footnotetext{\href
{https://www.skydio.com/skydio-autonomy}{Skydio autonomy}}, so this direction is very perspective for researchers. Many drones available for sale are costly, and even a well-trained pilot is afraid of crashing. At the same time, autonomous drones are more predictable than a human pilot, behave acording to algorithms and can react much faster, but only if they have a well-designed system running on board, so obstacle avoidance for autonomous MAVs will be both more challenging and more critical in future trends.

While obstacle avoidance considers static objects, collision avoidance is related to averting crashing with moving objects like other MAVs, cars or people. It is a complicated task but more relevant to multi-robot systems, because during interactions between robots they should not brake each other.

There are several obstacle avoidance sensors used by various MAVs: stereo vision \cite{arxiv}, depth cameras (as Intel RealSense), monocular vision \cite{Mejias2010}, lidar (2d or 3d) \cite{Ramasamy2016}, sonar (ultrasonic), time of flight sensors, also combinations of them can be used. In \cite{Rambabu2015} the sensor fusion of ultrasonic and infrared sensors is presented.

Each of them has its pros and cons. 3d lidars are extremely expensive but the most efficient for today; 2d lidars are used for small ground vehicles, but not suitable for most tasks for MAVs (because a car can be modelled as a 2 DoF system, while MAV always has 6 DoF), depth cameras are relatively expensive too, ultrasonic and infrared sensors both have distance limits and other minor issues. Overall, stereo vision is the most promising approach for the nearest future.

\section{Related Works}

The goal of this thesis is to implement an obstacle avoidance system, and expand it to collision avoidance system for autonomous MAVs driven by a Robotic operating system (ROS) using the MRS UAV system \footnote{\href{https://github.com/ctu-mrs/mrs_uav_system}{MRS UAV system}}. 

Firstly it is necessary to calibrate a stereo pair, then implement a structure from motion algorithm for each camera and find moving objects using the fact of overlaping sones for each camera.


\section{MRS UAV system}
